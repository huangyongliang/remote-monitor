# 手动实现远程执行功能



## 需求分析



1. 如何编译提交到服务器的 Java 代码？
2. 如何执行编译之后的 Java 代码？
3. 如何收集 Java 代码的执行结果？

## 思路

### 一

第一种，在服务器上编译，在 JDK 6 以后可以使用 Compiler API。

第二种，在客户端编译好在上传。

### 二

要执行编译后的 Java 代码，让类加载器加载这个类生成一个 Class 对象，然后反射调用一下某个方法就可以了，这里要支持反复修改、提交、执行。

### 三

使用标准输出（System.out）和标准错误输出（System.err）会把整个服务器上其他线程的信息都打印出来，因为资源共享，可以使用自己定义的 PrintStream 对象替换原来的标准输出，在字节码流上替换原有的符号引用。



## 实现

第一步，单机测试功能类。

第二步，通过 Spring Cloud 提供远程访问。